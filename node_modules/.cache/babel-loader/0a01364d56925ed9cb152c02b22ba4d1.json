{"ast":null,"code":"/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __extends } from \"tslib\";\nimport { numbers } from '../constants';\nimport { MDCTopAppBarBaseFoundation } from '../foundation';\nvar INITIAL_VALUE = 0;\n\nvar MDCTopAppBarFoundation =\n/** @class */\nfunction (_super) {\n  __extends(MDCTopAppBarFoundation, _super);\n  /* istanbul ignore next: optional argument is not a branch statement */\n\n\n  function MDCTopAppBarFoundation(adapter) {\n    var _this = _super.call(this, adapter) || this;\n    /**\n     * Indicates if the top app bar was docked in the previous scroll handler iteration.\n     */\n\n\n    _this.wasDocked = true;\n    /**\n     * Indicates if the top app bar is docked in the fully shown position.\n     */\n\n    _this.isDockedShowing = true;\n    /**\n     * Variable for current scroll position of the top app bar\n     */\n\n    _this.currentAppBarOffsetTop = 0;\n    /**\n     * Used to prevent the top app bar from being scrolled out of view during resize events\n     */\n\n    _this.isCurrentlyBeingResized = false;\n    /**\n     * The timeout that's used to throttle the resize events\n     */\n\n    _this.resizeThrottleId = INITIAL_VALUE;\n    /**\n     * The timeout that's used to debounce toggling the isCurrentlyBeingResized\n     * variable after a resize\n     */\n\n    _this.resizeDebounceId = INITIAL_VALUE;\n    _this.lastScrollPosition = _this.adapter.getViewportScrollY();\n    _this.topAppBarHeight = _this.adapter.getTopAppBarHeight();\n    return _this;\n  }\n\n  MDCTopAppBarFoundation.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.adapter.setStyle('top', '');\n  };\n  /**\n   * Scroll handler for the default scroll behavior of the top app bar.\n   * @override\n   */\n\n\n  MDCTopAppBarFoundation.prototype.handleTargetScroll = function () {\n    var currentScrollPosition = Math.max(this.adapter.getViewportScrollY(), 0);\n    var diff = currentScrollPosition - this.lastScrollPosition;\n    this.lastScrollPosition = currentScrollPosition; // If the window is being resized the lastScrollPosition needs to be updated\n    // but the current scroll of the top app bar should stay in the same\n    // position.\n\n    if (!this.isCurrentlyBeingResized) {\n      this.currentAppBarOffsetTop -= diff;\n\n      if (this.currentAppBarOffsetTop > 0) {\n        this.currentAppBarOffsetTop = 0;\n      } else if (Math.abs(this.currentAppBarOffsetTop) > this.topAppBarHeight) {\n        this.currentAppBarOffsetTop = -this.topAppBarHeight;\n      }\n\n      this.moveTopAppBar();\n    }\n  };\n  /**\n   * Top app bar resize handler that throttle/debounce functions that execute updates.\n   * @override\n   */\n\n\n  MDCTopAppBarFoundation.prototype.handleWindowResize = function () {\n    var _this = this; // Throttle resize events 10 p/s\n\n\n    if (!this.resizeThrottleId) {\n      this.resizeThrottleId = setTimeout(function () {\n        _this.resizeThrottleId = INITIAL_VALUE;\n\n        _this.throttledResizeHandler();\n      }, numbers.DEBOUNCE_THROTTLE_RESIZE_TIME_MS);\n    }\n\n    this.isCurrentlyBeingResized = true;\n\n    if (this.resizeDebounceId) {\n      clearTimeout(this.resizeDebounceId);\n    }\n\n    this.resizeDebounceId = setTimeout(function () {\n      _this.handleTargetScroll();\n\n      _this.isCurrentlyBeingResized = false;\n      _this.resizeDebounceId = INITIAL_VALUE;\n    }, numbers.DEBOUNCE_THROTTLE_RESIZE_TIME_MS);\n  };\n  /**\n   * Function to determine if the DOM needs to update.\n   */\n\n\n  MDCTopAppBarFoundation.prototype.checkForUpdate = function () {\n    var offscreenBoundaryTop = -this.topAppBarHeight;\n    var hasAnyPixelsOffscreen = this.currentAppBarOffsetTop < 0;\n    var hasAnyPixelsOnscreen = this.currentAppBarOffsetTop > offscreenBoundaryTop;\n    var partiallyShowing = hasAnyPixelsOffscreen && hasAnyPixelsOnscreen; // If it's partially showing, it can't be docked.\n\n    if (partiallyShowing) {\n      this.wasDocked = false;\n    } else {\n      // Not previously docked and not partially showing, it's now docked.\n      if (!this.wasDocked) {\n        this.wasDocked = true;\n        return true;\n      } else if (this.isDockedShowing !== hasAnyPixelsOnscreen) {\n        this.isDockedShowing = hasAnyPixelsOnscreen;\n        return true;\n      }\n    }\n\n    return partiallyShowing;\n  };\n  /**\n   * Function to move the top app bar if needed.\n   */\n\n\n  MDCTopAppBarFoundation.prototype.moveTopAppBar = function () {\n    if (this.checkForUpdate()) {\n      // Once the top app bar is fully hidden we use the max potential top app bar height as our offset\n      // so the top app bar doesn't show if the window resizes and the new height > the old height.\n      var offset = this.currentAppBarOffsetTop;\n\n      if (Math.abs(offset) >= this.topAppBarHeight) {\n        offset = -numbers.MAX_TOP_APP_BAR_HEIGHT;\n      }\n\n      this.adapter.setStyle('top', offset + 'px');\n    }\n  };\n  /**\n   * Throttled function that updates the top app bar scrolled values if the\n   * top app bar height changes.\n   */\n\n\n  MDCTopAppBarFoundation.prototype.throttledResizeHandler = function () {\n    var currentHeight = this.adapter.getTopAppBarHeight();\n\n    if (this.topAppBarHeight !== currentHeight) {\n      this.wasDocked = false; // Since the top app bar has a different height depending on the screen width, this\n      // will ensure that the top app bar remains in the correct location if\n      // completely hidden and a resize makes the top app bar a different height.\n\n      this.currentAppBarOffsetTop -= this.topAppBarHeight - currentHeight;\n      this.topAppBarHeight = currentHeight;\n    }\n\n    this.handleTargetScroll();\n  };\n\n  return MDCTopAppBarFoundation;\n}(MDCTopAppBarBaseFoundation);\n\nexport { MDCTopAppBarFoundation }; // tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\n\nexport default MDCTopAppBarFoundation;","map":{"version":3,"sources":["foundation.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;AAqBG;;AAGH,SAAQ,OAAR,QAAsB,cAAtB;AACA,SAAQ,0BAAR,QAAyC,eAAzC;AAEA,IAAM,aAAa,GAAG,CAAtB;;AAEA,IAAA,sBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4C,EAAA,SAAA,CAAA,sBAAA,EAAA,MAAA,CAAA;AA0C1C;;;AACA,WAAA,sBAAA,CAAY,OAAZ,EAAkD;AAAlD,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,OAAN,KAAc,IADhB;AA1CA;;AAEG;;;AACK,IAAA,KAAA,CAAA,SAAA,GAAY,IAAZ;AAER;;AAEG;;AACK,IAAA,KAAA,CAAA,eAAA,GAAkB,IAAlB;AAER;;AAEG;;AACK,IAAA,KAAA,CAAA,sBAAA,GAAyB,CAAzB;AAER;;AAEG;;AACK,IAAA,KAAA,CAAA,uBAAA,GAA0B,KAA1B;AAER;;AAEG;;AACK,IAAA,KAAA,CAAA,gBAAA,GAAmB,aAAnB;AAYR;;;AAGG;;AACK,IAAA,KAAA,CAAA,gBAAA,GAAmB,aAAnB;AAMN,IAAA,KAAI,CAAC,kBAAL,GAA0B,KAAI,CAAC,OAAL,CAAa,kBAAb,EAA1B;AACA,IAAA,KAAI,CAAC,eAAL,GAAuB,KAAI,CAAC,OAAL,CAAa,kBAAb,EAAvB;;AACD;;AAEQ,EAAA,sBAAA,CAAA,SAAA,CAAA,OAAA,GAAT,YAAA;AACE,IAAA,MAAA,CAAA,SAAA,CAAM,OAAN,CAAa,IAAb,CAAa,IAAb;;AACA,SAAK,OAAL,CAAa,QAAb,CAAsB,KAAtB,EAA6B,EAA7B;AACD,GAHQ;AAKT;;;AAGG;;;AACM,EAAA,sBAAA,CAAA,SAAA,CAAA,kBAAA,GAAT,YAAA;AACE,QAAM,qBAAqB,GAAG,IAAI,CAAC,GAAL,CAAS,KAAK,OAAL,CAAa,kBAAb,EAAT,EAA4C,CAA5C,CAA9B;AACA,QAAM,IAAI,GAAG,qBAAqB,GAAG,KAAK,kBAA1C;AACA,SAAK,kBAAL,GAA0B,qBAA1B,CAHF,CAKE;AACA;AACA;;AACA,QAAI,CAAC,KAAK,uBAAV,EAAmC;AACjC,WAAK,sBAAL,IAA+B,IAA/B;;AAEA,UAAI,KAAK,sBAAL,GAA8B,CAAlC,EAAqC;AACnC,aAAK,sBAAL,GAA8B,CAA9B;AACD,OAFD,MAEO,IAAI,IAAI,CAAC,GAAL,CAAS,KAAK,sBAAd,IAAwC,KAAK,eAAjD,EAAkE;AACvE,aAAK,sBAAL,GAA8B,CAAC,KAAK,eAApC;AACD;;AAED,WAAK,aAAL;AACD;AACF,GAnBQ;AAqBT;;;AAGG;;;AACM,EAAA,sBAAA,CAAA,SAAA,CAAA,kBAAA,GAAT,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA,CAAA,CACE;;;AACA,QAAI,CAAC,KAAK,gBAAV,EAA4B;AAC1B,WAAK,gBAAL,GAAwB,UAAU,CAAC,YAAA;AACjC,QAAA,KAAI,CAAC,gBAAL,GAAwB,aAAxB;;AACA,QAAA,KAAI,CAAC,sBAAL;AACD,OAHiC,EAG/B,OAAO,CAAC,gCAHuB,CAAlC;AAID;;AAED,SAAK,uBAAL,GAA+B,IAA/B;;AAEA,QAAI,KAAK,gBAAT,EAA2B;AACzB,MAAA,YAAY,CAAC,KAAK,gBAAN,CAAZ;AACD;;AAED,SAAK,gBAAL,GAAwB,UAAU,CAAC,YAAA;AACjC,MAAA,KAAI,CAAC,kBAAL;;AACA,MAAA,KAAI,CAAC,uBAAL,GAA+B,KAA/B;AACA,MAAA,KAAI,CAAC,gBAAL,GAAwB,aAAxB;AACD,KAJiC,EAI/B,OAAO,CAAC,gCAJuB,CAAlC;AAKD,GApBQ;AAsBT;;AAEG;;;AACK,EAAA,sBAAA,CAAA,SAAA,CAAA,cAAA,GAAR,YAAA;AACE,QAAM,oBAAoB,GAAG,CAAC,KAAK,eAAnC;AACA,QAAM,qBAAqB,GAAG,KAAK,sBAAL,GAA8B,CAA5D;AACA,QAAM,oBAAoB,GACtB,KAAK,sBAAL,GAA8B,oBADlC;AAEA,QAAM,gBAAgB,GAAG,qBAAqB,IAAI,oBAAlD,CALF,CAOE;;AACA,QAAI,gBAAJ,EAAsB;AACpB,WAAK,SAAL,GAAiB,KAAjB;AACD,KAFD,MAEO;AACL;AACA,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,aAAK,SAAL,GAAiB,IAAjB;AACA,eAAO,IAAP;AACD,OAHD,MAGO,IAAI,KAAK,eAAL,KAAyB,oBAA7B,EAAmD;AACxD,aAAK,eAAL,GAAuB,oBAAvB;AACA,eAAO,IAAP;AACD;AACF;;AAED,WAAO,gBAAP;AACD,GAtBO;AAwBR;;AAEG;;;AACK,EAAA,sBAAA,CAAA,SAAA,CAAA,aAAA,GAAR,YAAA;AACE,QAAI,KAAK,cAAL,EAAJ,EAA2B;AACzB;AACA;AACA,UAAI,MAAM,GAAG,KAAK,sBAAlB;;AACA,UAAI,IAAI,CAAC,GAAL,CAAS,MAAT,KAAoB,KAAK,eAA7B,EAA8C;AAC5C,QAAA,MAAM,GAAG,CAAC,OAAO,CAAC,sBAAlB;AACD;;AAED,WAAK,OAAL,CAAa,QAAb,CAAsB,KAAtB,EAA6B,MAAM,GAAG,IAAtC;AACD;AACF,GAXO;AAaR;;;AAGG;;;AACK,EAAA,sBAAA,CAAA,SAAA,CAAA,sBAAA,GAAR,YAAA;AACE,QAAM,aAAa,GAAG,KAAK,OAAL,CAAa,kBAAb,EAAtB;;AACA,QAAI,KAAK,eAAL,KAAyB,aAA7B,EAA4C;AAC1C,WAAK,SAAL,GAAiB,KAAjB,CAD0C,CAG1C;AACA;AACA;;AACA,WAAK,sBAAL,IAA+B,KAAK,eAAL,GAAuB,aAAtD;AACA,WAAK,eAAL,GAAuB,aAAvB;AACD;;AACD,SAAK,kBAAL;AACD,GAZO;;AAaV,SAAA,sBAAA;AAAC,CAtKD,CAA4C,0BAA5C,CAAA;;mCAwKA;;AACA,eAAe,sBAAf","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __extends } from \"tslib\";\nimport { numbers } from '../constants';\nimport { MDCTopAppBarBaseFoundation } from '../foundation';\nvar INITIAL_VALUE = 0;\nvar MDCTopAppBarFoundation = /** @class */ (function (_super) {\n    __extends(MDCTopAppBarFoundation, _super);\n    /* istanbul ignore next: optional argument is not a branch statement */\n    function MDCTopAppBarFoundation(adapter) {\n        var _this = _super.call(this, adapter) || this;\n        /**\n         * Indicates if the top app bar was docked in the previous scroll handler iteration.\n         */\n        _this.wasDocked = true;\n        /**\n         * Indicates if the top app bar is docked in the fully shown position.\n         */\n        _this.isDockedShowing = true;\n        /**\n         * Variable for current scroll position of the top app bar\n         */\n        _this.currentAppBarOffsetTop = 0;\n        /**\n         * Used to prevent the top app bar from being scrolled out of view during resize events\n         */\n        _this.isCurrentlyBeingResized = false;\n        /**\n         * The timeout that's used to throttle the resize events\n         */\n        _this.resizeThrottleId = INITIAL_VALUE;\n        /**\n         * The timeout that's used to debounce toggling the isCurrentlyBeingResized\n         * variable after a resize\n         */\n        _this.resizeDebounceId = INITIAL_VALUE;\n        _this.lastScrollPosition = _this.adapter.getViewportScrollY();\n        _this.topAppBarHeight = _this.adapter.getTopAppBarHeight();\n        return _this;\n    }\n    MDCTopAppBarFoundation.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.adapter.setStyle('top', '');\n    };\n    /**\n     * Scroll handler for the default scroll behavior of the top app bar.\n     * @override\n     */\n    MDCTopAppBarFoundation.prototype.handleTargetScroll = function () {\n        var currentScrollPosition = Math.max(this.adapter.getViewportScrollY(), 0);\n        var diff = currentScrollPosition - this.lastScrollPosition;\n        this.lastScrollPosition = currentScrollPosition;\n        // If the window is being resized the lastScrollPosition needs to be updated\n        // but the current scroll of the top app bar should stay in the same\n        // position.\n        if (!this.isCurrentlyBeingResized) {\n            this.currentAppBarOffsetTop -= diff;\n            if (this.currentAppBarOffsetTop > 0) {\n                this.currentAppBarOffsetTop = 0;\n            }\n            else if (Math.abs(this.currentAppBarOffsetTop) > this.topAppBarHeight) {\n                this.currentAppBarOffsetTop = -this.topAppBarHeight;\n            }\n            this.moveTopAppBar();\n        }\n    };\n    /**\n     * Top app bar resize handler that throttle/debounce functions that execute updates.\n     * @override\n     */\n    MDCTopAppBarFoundation.prototype.handleWindowResize = function () {\n        var _this = this;\n        // Throttle resize events 10 p/s\n        if (!this.resizeThrottleId) {\n            this.resizeThrottleId = setTimeout(function () {\n                _this.resizeThrottleId = INITIAL_VALUE;\n                _this.throttledResizeHandler();\n            }, numbers.DEBOUNCE_THROTTLE_RESIZE_TIME_MS);\n        }\n        this.isCurrentlyBeingResized = true;\n        if (this.resizeDebounceId) {\n            clearTimeout(this.resizeDebounceId);\n        }\n        this.resizeDebounceId = setTimeout(function () {\n            _this.handleTargetScroll();\n            _this.isCurrentlyBeingResized = false;\n            _this.resizeDebounceId = INITIAL_VALUE;\n        }, numbers.DEBOUNCE_THROTTLE_RESIZE_TIME_MS);\n    };\n    /**\n     * Function to determine if the DOM needs to update.\n     */\n    MDCTopAppBarFoundation.prototype.checkForUpdate = function () {\n        var offscreenBoundaryTop = -this.topAppBarHeight;\n        var hasAnyPixelsOffscreen = this.currentAppBarOffsetTop < 0;\n        var hasAnyPixelsOnscreen = this.currentAppBarOffsetTop > offscreenBoundaryTop;\n        var partiallyShowing = hasAnyPixelsOffscreen && hasAnyPixelsOnscreen;\n        // If it's partially showing, it can't be docked.\n        if (partiallyShowing) {\n            this.wasDocked = false;\n        }\n        else {\n            // Not previously docked and not partially showing, it's now docked.\n            if (!this.wasDocked) {\n                this.wasDocked = true;\n                return true;\n            }\n            else if (this.isDockedShowing !== hasAnyPixelsOnscreen) {\n                this.isDockedShowing = hasAnyPixelsOnscreen;\n                return true;\n            }\n        }\n        return partiallyShowing;\n    };\n    /**\n     * Function to move the top app bar if needed.\n     */\n    MDCTopAppBarFoundation.prototype.moveTopAppBar = function () {\n        if (this.checkForUpdate()) {\n            // Once the top app bar is fully hidden we use the max potential top app bar height as our offset\n            // so the top app bar doesn't show if the window resizes and the new height > the old height.\n            var offset = this.currentAppBarOffsetTop;\n            if (Math.abs(offset) >= this.topAppBarHeight) {\n                offset = -numbers.MAX_TOP_APP_BAR_HEIGHT;\n            }\n            this.adapter.setStyle('top', offset + 'px');\n        }\n    };\n    /**\n     * Throttled function that updates the top app bar scrolled values if the\n     * top app bar height changes.\n     */\n    MDCTopAppBarFoundation.prototype.throttledResizeHandler = function () {\n        var currentHeight = this.adapter.getTopAppBarHeight();\n        if (this.topAppBarHeight !== currentHeight) {\n            this.wasDocked = false;\n            // Since the top app bar has a different height depending on the screen width, this\n            // will ensure that the top app bar remains in the correct location if\n            // completely hidden and a resize makes the top app bar a different height.\n            this.currentAppBarOffsetTop -= this.topAppBarHeight - currentHeight;\n            this.topAppBarHeight = currentHeight;\n        }\n        this.handleTargetScroll();\n    };\n    return MDCTopAppBarFoundation;\n}(MDCTopAppBarBaseFoundation));\nexport { MDCTopAppBarFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCTopAppBarFoundation;\n//# sourceMappingURL=foundation.js.map"]},"metadata":{},"sourceType":"module"}